# –ì–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤

## –û–ø–∏—Å–∞–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–∞ —Ä–∞–∑–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Ö –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏—è.

## –ò–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Server
–î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤–æ–µ –ø–æ–ª–µ `Region` –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `Server`:

```go
type Server struct {
    Name     string `json:"name"`
    DNS      string `json:"dns"`
    Sessions int    `json:"sessions"`
    Enable   bool   `json:"enable"`
    Online   bool   `json:"online"`
    Region   string `json:"region"` // Region restriction, e.g., "RU" for Russia-only servers
}
```

### 2. –õ–æ–≥–∏–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ (–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è)

–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è **–ª—é–±–æ–π —Å—Ç—Ä–∞–Ω—ã** –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞:

#### –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã (`region: ""`):
- –î–æ—Å—Ç—É–ø–Ω—ã **–≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º** –∏–∑ –ª—é–±–æ–π —Å—Ç—Ä–∞–Ω—ã
- –£—á–∞—Å—Ç–≤—É—é—Ç –≤ –æ–±—â–µ–º –ø—É–ª–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–π
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—É–ª –¥–ª—è —Å—Ç—Ä–∞–Ω –±–µ–∑ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤

#### –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `region: "RU"`, `region: "CN"`, `region: "US"`):
- ‚ö†Ô∏è **–ò–ó–û–õ–ò–†–û–í–ê–ù–´** –æ—Ç –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω - –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∏—Ö –ø—É–ª —Å–µ—Ä–≤–µ—Ä–æ–≤
- ‚ö†Ô∏è **–ù–ï —É—á–∞—Å—Ç–≤—É—é—Ç** –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ —Å–µ—Å—Å–∏–π –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω
- ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã **–¢–û–õ–¨–ö–û** –∫–ª–∏–µ–Ω—Ç–∞–º —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º `country_code` –≤ POST –∑–∞–ø—Ä–æ—Å–µ
- ‚úÖ –î–ª—è —Å–≤–æ–µ–π —Å—Ç—Ä–∞–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º —Å–µ—Å—Å–∏–π

#### –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞:
- –ö–ª–∏–µ–Ω—Ç —Å `country_code: "RU"` –≤–∏–¥–∏—Ç: **–¢–û–õ–¨–ö–û str9** (—Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π RU) - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω—ã
- –ö–ª–∏–µ–Ω—Ç —Å `country_code: "IL"` –≤–∏–¥–∏—Ç: **–¢–û–õ–¨–ö–û –≥–ª–æ–±–∞–ª—å–Ω—ã–µ** —Å–µ—Ä–≤–µ—Ä—ã - —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω—ã
- –ö–ª–∏–µ–Ω—Ç –±–µ–∑ `country_code` –≤–∏–¥–∏—Ç: —Ç–æ–ª—å–∫–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã

**–ö–ª—é—á–µ–≤–∞—è –ª–æ–≥–∏–∫–∞:** –ï—Å–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω—ã –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä, —Ç–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã –¥–ª—è –Ω–µ–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è!

### 3. –ê–ª–≥–æ—Ä–∏—Ç–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤

–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ POST –∑–∞–ø—Ä–æ—Å–∞ —Å `country_code`, —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –¥–≤—É—Ö—ç—Ç–∞–ø–Ω—É—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é:

**–≠—Ç–∞–ø 1: –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤**
```go
for –∫–∞–∂–¥—ã–π server –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
    if server.Region == "":
        –¥–æ–±–∞–≤–∏—Ç—å server –≤ globalServers
    else if server.Region == country_code:
        –¥–æ–±–∞–≤–∏—Ç—å server –≤ regionalServers
    else:
        –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å (—Å–µ—Ä–≤–µ—Ä –¥—Ä—É–≥–æ–π —Å—Ç—Ä–∞–Ω—ã)
```

**–≠—Ç–∞–ø 2: –í—ã–±–æ—Ä –ø—É–ª–∞**
```go
if –µ—Å—Ç—å regionalServers:
    –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û regionalServers (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω—ã)
else:
    –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û globalServers
```

**–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç:** –ù–∞–ª–∏—á–∏–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è —Å—Ç—Ä–∞–Ω—ã **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–∞–µ—Ç** –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã –∏–∑ –ø—É–ª–∞ –¥–ª—è —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω—ã. –≠—Ç–æ –∏–∑–æ–ª–∏—Ä—É–µ—Ç —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫.

### 4. –§—É–Ω–∫—Ü–∏–∏

#### `getBestServerForCountry(countryCode string)`
–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å —É—á–µ—Ç–æ–º –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω—ã –∫–ª–∏–µ–Ω—Ç–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `countryCode` - –¥–≤—É—Ö–±—É–∫–≤–µ–Ω–Ω—ã–π –∫–æ–¥ —Å—Ç—Ä–∞–Ω—ã (ISO 3166-1 alpha-2), –Ω–∞–ø—Ä–∏–º–µ—Ä "RU", "US", "IL"

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
1. –§–∏–ª—å—Ç—Ä—É–µ—Ç —Å–µ—Ä–≤–µ—Ä—ã –ø–æ —Ä–µ–≥–∏–æ–Ω—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω—ã
2. –í—ã–±–∏—Ä–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–µ—Å—Å–∏–π
3. –ü—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å–µ—Å—Å–∏–π –≤—ã–±–∏—Ä–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

#### `getBestServer()`
–û—Å—Ç–∞–≤–ª–µ–Ω–∞ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏. –í—ã–∑—ã–≤–∞–µ—Ç `getBestServerForCountry("")`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç "–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ —Ä–µ–≥–∏–æ–Ω—É".

### 5. POST /server
–û–±—Ä–∞–±–æ—Ç—á–∏–∫ `getServerByID` —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∫–æ–¥ —Å—Ç—Ä–∞–Ω—ã –∏–∑ –ø–æ–ª—è `Geo.CountryCode` –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–µ—Ä–≤–µ—Ä–∞.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –§–æ—Ä–º–∞—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
–ü—Ä–∏–º–µ—Ä `conf.json` —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ä–µ–≥–∏–æ–Ω–∞–º–∏:

```json
{
  "str1": {
    "name": "str1",
    "dns": "str1.example.com",
    "sessions": 0,
    "enable": true,
    "online": true,
    "region": ""
  },
  "str2": {
    "name": "str2",
    "dns": "str2.example.com",
    "sessions": 0,
    "enable": true,
    "online": true,
    "region": ""
  },
  "str9": {
    "name": "str9",
    "dns": "str9.example.com",
    "sessions": 0,
    "enable": true,
    "online": true,
    "region": "RU"
  },
  "str10": {
    "name": "str10",
    "dns": "str10.example.com",
    "sessions": 0,
    "enable": true,
    "online": true,
    "region": "CN"
  },
  "str11": {
    "name": "str11",
    "dns": "str11.example.com",
    "sessions": 0,
    "enable": true,
    "online": true,
    "region": "US"
  }
}
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–≥–∏–æ–Ω–∞

- **`region: ""`** (–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞) - **–≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä**, –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏–∑ –ª—é–±–æ–π —Å—Ç—Ä–∞–Ω—ã
- **`region: "RU"`** - **—Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä** –¥–ª—è –†–æ—Å—Å–∏–∏, –¥–æ—Å—Ç—É–ø–µ–Ω **—Ç–æ–ª—å–∫–æ** –∫–ª–∏–µ–Ω—Ç–∞–º —Å `country_code: "RU"`
- **`region: "CN"`** - **—Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä** –¥–ª—è –ö–∏—Ç–∞—è, –¥–æ—Å—Ç—É–ø–µ–Ω **—Ç–æ–ª—å–∫–æ** –∫–ª–∏–µ–Ω—Ç–∞–º —Å `country_code: "CN"`
- **`region: "US"`** - **—Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä** –¥–ª—è –°–®–ê, –¥–æ—Å—Ç—É–ø–µ–Ω **—Ç–æ–ª—å–∫–æ** –∫–ª–∏–µ–Ω—Ç–∞–º —Å `country_code: "US"`

–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—ã–µ –¥–≤—É—Ö–±—É–∫–≤–µ–Ω–Ω—ã–µ –∫–æ–¥—ã —Å—Ç—Ä–∞–Ω (ISO 3166-1 alpha-2) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø—É–ª–æ–≤. –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞!

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ö–ª–∏–µ–Ω—Ç –∏–∑ –†–æ—Å—Å–∏–∏ (RU)
```json
POST /server
{
  "geo": {
    "country_code": "RU",
    "city": "Moscow",
    "region": "Moscow"
  }
}
```
**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã –≤ –ø—É–ª–µ:** 
- ‚úÖ `str9` (region: "RU") - **–ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô –¥–æ—Å—Ç—É–ø–Ω—ã–π**

**–ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã (–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–µ–Ω—ã):** 
- ‚ùå `str1`, `str2`, `str3`... (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ) - **–∏—Å–∫–ª—é—á–µ–Ω—ã, —Ç.–∫. –µ—Å—Ç—å —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è RU**
- ‚ùå `str10` (region: "CN")
- ‚ùå `str11` (region: "US")

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –≤–µ—Ä–Ω–µ—Ç—Å—è **str9** (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø–Ω—ã–π —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è RU)

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ö–ª–∏–µ–Ω—Ç –∏–∑ –ö–∏—Ç–∞—è (CN)
```json
POST /server
{
  "geo": {
    "country_code": "CN",
    "city": "Beijing",
    "region": "Beijing"
  }
}
```
**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã –≤ –ø—É–ª–µ:** 
- ‚úÖ `str10` (region: "CN") - **–ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô –¥–æ—Å—Ç—É–ø–Ω—ã–π**

**–ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã (–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–µ–Ω—ã):** 
- ‚ùå `str1`, `str2`, `str3`... (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ) - **–∏—Å–∫–ª—é—á–µ–Ω—ã, —Ç.–∫. –µ—Å—Ç—å —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è CN**
- ‚ùå `str9` (region: "RU")
- ‚ùå `str11` (region: "US")

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –≤–µ—Ä–Ω–µ—Ç—Å—è **str10** (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è CN)

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ö–ª–∏–µ–Ω—Ç –∏–∑ –ò–∑—Ä–∞–∏–ª—è (IL) - –Ω–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
```json
POST /server
{
  "geo": {
    "country_code": "IL",
    "city": "Tel Aviv",
    "region": "Tel Aviv"
  }
}
```
**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã –≤ –ø—É–ª–µ:** 
- ‚úÖ `str1` (region: "", –≥–ª–æ–±–∞–ª—å–Ω—ã–π)
- ‚úÖ `str2` (region: "", –≥–ª–æ–±–∞–ª—å–Ω—ã–π)

**–ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã):** 
- ‚ùå `str9` (region: "RU", **–∏—Å–∫–ª—é—á–µ–Ω** - –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ø—É–ª –¥–ª—è IL)
- ‚ùå `str10` (region: "CN", **–∏—Å–∫–ª—é—á–µ–Ω** - –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ø—É–ª –¥–ª—è IL)
- ‚ùå `str11` (region: "US", **–∏—Å–∫–ª—é—á–µ–Ω** - –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ø—É–ª –¥–ª—è IL)

**–í–∞–∂–Ω–æ:** –ö–ª–∏–µ–Ω—Ç –∏–∑ –ò–∑—Ä–∞–∏–ª—è **–Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç** –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–µ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤. –û–Ω–∏ –¥–ª—è –Ω–µ–≥–æ –ø—Ä–æ—Å—Ç–æ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ —Å–∏—Å—Ç–µ–º–µ!

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ö–ª–∏–µ–Ω—Ç –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω—ã –∏–ª–∏ —Å—Ç—Ä–∞–Ω–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
```json
POST /server
{
  "geo": {
    "country_code": "",
    "city": "",
    "region": ""
  }
}
```
**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã –≤ –ø—É–ª–µ:** 
- ‚úÖ `str1` (region: "", –≥–ª–æ–±–∞–ª—å–Ω—ã–π)
- ‚úÖ `str2` (region: "", –≥–ª–æ–±–∞–ª—å–Ω—ã–π)

**–ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã):** 
- ‚ùå `str9` (region: "RU")
- ‚ùå `str10` (region: "CN")
- ‚ùå `str11` (region: "US")

**–ò—Ç–æ–≥:** –í—Å–µ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–µ–Ω—ã** –∏–∑ –ø—É–ª–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –±–µ–∑ `country_code`

## –¢–∞–±–ª–∏—Ü–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

–î–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏, –≤–æ—Ç –∫–∞–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —Å–µ—Ä–≤–µ—Ä—ã –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–∞–º–∏:

| –°–µ—Ä–≤–µ—Ä | Region | üá∑üá∫ RU | üá®üá≥ CN | üá∫üá∏ US | üáÆüá± IL | –ë–µ–∑ —Å—Ç—Ä–∞–Ω—ã |
|--------|--------|--------|--------|--------|--------|------------|
| str1   | ""     | ‚ùå     | ‚ùå     | ‚ùå     | ‚úÖ     | ‚úÖ         |
| str2   | ""     | ‚ùå     | ‚ùå     | ‚ùå     | ‚úÖ     | ‚úÖ         |
| str9   | "RU"   | ‚úÖ     | ‚ùå     | ‚ùå     | ‚ùå     | ‚ùå         |
| str10  | "CN"   | ‚ùå     | ‚úÖ     | ‚ùå     | ‚ùå     | ‚ùå         |
| str11  | "US"   | ‚ùå     | ‚ùå     | ‚úÖ     | ‚ùå     | ‚ùå         |

**–í—ã–≤–æ–¥—ã:**
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã (`region: ""`) –¥–æ—Å—Ç—É–ø–Ω—ã **—Ç–æ–ª—å–∫–æ** —Å—Ç—Ä–∞–Ω–∞–º –±–µ–∑ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
- –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã –¥–æ—Å—Ç—É–ø–Ω—ã **—Ç–æ–ª—å–∫–æ** —Å–≤–æ–∏–º –∫–ª–∏–µ–Ω—Ç–∞–º
- **–ï—Å–ª–∏ —É —Å—Ç—Ä–∞–Ω—ã –µ—Å—Ç—å —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã, –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –¥–ª—è –Ω–µ–µ –∏—Å–∫–ª—é—á–µ–Ω—ã**
- –ö–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∞ –ø–æ–ª—É—á–∞–µ—Ç **–ò–õ–ò** —Å–≤–æ–∏ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ, **–ò–õ–ò** –≥–ª–æ–±–∞–ª—å–Ω—ã–µ (–Ω–µ –≤–º–µ—Å—Ç–µ!)

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–§—É–Ω–∫—Ü–∏—è `getBestServerForCountry` –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ –ª–æ–≥ —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
- –í—ã–±—Ä–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
- DNS —Å–µ—Ä–≤–µ—Ä–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Å—Å–∏–π
- –†–µ–≥–∏–æ–Ω —Å–µ—Ä–≤–µ—Ä–∞
- –ö–æ–¥ —Å—Ç—Ä–∞–Ω—ã –∫–ª–∏–µ–Ω—Ç–∞

–ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞:
```
DEBUG Selected server for request server=str9 dns=str9.example.com sessions=5 region=RU country_code=RU
```

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã:
- –ü–æ–ª–µ `region` –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ = –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)
- –§—É–Ω–∫—Ü–∏—è `getBestServer()` –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- GET `/server` —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ —É—á–µ—Ç–∞ —Ä–µ–≥–∏–æ–Ω–∞
- –°—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–µ–∑ –ø–æ–ª—è `region` –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω
